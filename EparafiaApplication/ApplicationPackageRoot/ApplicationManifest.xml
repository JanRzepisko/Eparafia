<?xml version="1.0" encoding="utf-8"?>
<ApplicationManifest ApplicationTypeName="EparafiaApplicationType"
                     ApplicationTypeVersion="1.0.0"
                     xmlns="http://schemas.microsoft.com/2011/01/fabric"
                     xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Parameters>
    <Parameter Name="Eparafia.Identity.API_InstanceCount" DefaultValue="-1" />
    <Parameter Name="Eparafia.Identity.API_Isolation" DefaultValue="default" />
  </Parameters>
  <!-- Zaimportuj element ServiceManifest z elementu ServicePackage. Elementy ServiceManifestName i ServiceManifestVersion 
       muszą być zgodne z atrybutami Name i Version elementu ServiceManifest zdefiniowanego 
       w pliku ServiceManifest.xml. -->
  <ServiceManifestImport>
    <ServiceManifestRef ServiceManifestName="Eparafia.Identity.APIPkg" ServiceManifestVersion="1.0.0" />
    <Policies>
      <ContainerHostPolicies CodePackageRef="Code" Isolation="[Eparafia.Identity.API_Isolation]">
        <PortBinding ContainerPort="80" EndpointRef="Eparafia.Identity.APITypeEndpoint" />
      </ContainerHostPolicies>
    </Policies>
  </ServiceManifestImport>
  <DefaultServices>
    <!-- Sekcja poniżej tworzy wystąpienia typów usługi, gdy tworzone jest wystąpienie tego 
         typu aplikacji. Możesz też utworzyć co najmniej jedno wystąpienie typu usługi przy użyciu 
         modułu ServiceFabric PowerShell.

         Poniższy atrybut ServiceTypeName musi odpowiadać nazwie zdefiniowanej w importowanym pliku ServiceManifest.xml. -->
    <Service Name="Eparafia.Identity.API" ServicePackageActivationMode="ExclusiveProcess">
      <StatelessService ServiceTypeName="Eparafia.Identity.APIType" InstanceCount="[Eparafia.Identity.API_InstanceCount]">
        <SingletonPartition />
      </StatelessService>
    </Service>
  </DefaultServices>
</ApplicationManifest>